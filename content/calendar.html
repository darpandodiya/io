BEGIN:VCALENDAR
CALSCALE:GREGORIAN
VERSION:2.0
X-WR-CALNAME:Linenoise Sets
METHOD:PUBLISH
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//linenoise.io//NONSGML v1.0//EN
<% items.select{|i| i.identifier =~ /\/calendar\/.+/}.sort{|a,b| a.attributes[:date] <=> b.attributes[:date]}.each do |event| %>BEGIN:VEVENT
TRANSP:TRANSPARENT
DTEND;VALUE=DATE:<%= event.attributes[:date].strftime("%Y%m%d") %>
UID:<%= event.attributes[:date].strftime("%Y%m%d") %>_<%= item.identifier.split('/')[-1] %>@linenoise.io
DTSTAMP:<%= event.attributes[:date].strftime("%Y%m%d") %>T033259Z
DESCRIPTION:Linenoise playing <%= event.attributes[:genre] %> at <%= event.attributes[:event] %>
STATUS:CONFIRMED
SEQUENCE:0
CLASS:PUBLIC
SUMMARY:Linenoise playing at <%= event.attributes[:event] %>
LOCATION:<%= event.attributes[:place] %>
DTSTART;VALUE=DATE:<%= event.attributes[:date].strftime("%Y%m%d") %>
X-APPLE-TRAVEL-ADVISORY-BEHAVIOR:AUTOMATIC
END:VEVENT
<% end %>END:VCALENDAR